function loadRO(obj) {    var client_id = obj.value;    $("#release_orders").html("<div class='form-group'>Loading...</div>");    $.ajax({        url: BASE_URL + "client/find_release_orders_html/" + client_id,        dataType: 'html',        success: function (response) {            $("#release_orders").html(response);        }    });}function showInvoice() {    var client = $('select[name="client"]').val();    var release_orders = $('select[name="release_order[]"]').val();        if(release_orders === null) {        alert('Please select release order');    }        $.ajax({        url: BASE_URL + "invoice/get_new_invoice_details_html",        type: 'post',        dataType: 'html',        data:{client_id:client,release_orders:release_orders},        success: function (response) {            $('#invoice-header').show();            $('#order-items').html(response);//            $("#release_orders").html(response);        }    });}    function computeInvoiceTax() {         var tax_element = document.getElementById('tax');        var tax_type = tax_element.options[tax_element.options.selectedIndex].getAttribute('data-taxtype');        var tax_value = tax_element.options[tax_element.options.selectedIndex].getAttribute('data-taxvalue');        tax_value = parseFloat(tax_value);         var tax_amount = 0;                 var total_amount = 0;                 //if(tax_type === null) {        //  $('#total_vat_amount').text('0.00');        //    return false;        //}          //else{        //  gross_total = document.getElementById('gross_amount').innerHTML;        //  gross_total = isNaN(parseFloat(gross_total)) ? 0 : parseFloat(gross_total);                                //  if (tax_type === 'percentage') {                //tax_amount = (gross_total / 100) * tax_value;        //      tax_amount = (gross_total / 100) * tax_value;        //      $('#total_vat_amount').text(tax_amount.toFixed(2));        //      total_amount = total_amount + tax_amount;        //      $('#total_amount').text(total_amount.toFixed(s));        //  } else {        //      $('#total_vat_amount').text('0.00');        //  }             //document.getElementById('tax_amount').innerHTML = tax_amount.toFixed(2);            //computeNetTotal();        //}        var Amount = document.getElementById('gross_amount').innerHTML;        Amount = isNaN(parseFloat(Amount)) ? 0 : parseFloat(Amount);		        var discount = $('#txtDiscount').val();         if(discount != ''){             if(Amount == 0){                $('#total_discount_amount').text('0.00');            }            else{                 var resultdiscount = Amount - discount;                 $('#total_discount_amount').text(resultdiscount.toFixed(2));                 total_amount = resultdiscount;            }        }        else{            total_amount = Amount;            $('#total_discount_amount').text('0.00');        }                 var tax_value = $('select#tax option:selected').attr('data-taxvalue');          if(!(tax_value > 0)){               $('#total_vat_amount').text('0.00');        }        else{                    tax_amount = (total_amount / 100) * tax_value;                   $('#total_vat_amount').text(tax_amount.toFixed(2));                    total_amount = total_amount + tax_amount;            }                      $('#total_amount').text(total_amount.toFixed(2));         }function updateAmount(base_rate, size, amount_id) {     //alert(document.getElementById('gross_amount').length);    var size_arr = size.split('_');     var size_value;         if(typeof size_arr[1] === "undefined") {         size_value = size_arr[0];     } else {         size_value = size_arr[0] * size_arr[1];     }         var amount = size_value * base_rate;     $('#' + amount_id).html(amount.toFixed(2));         // calculate totals     var total_base_rate1 = 0;     var total_amount = 0;     $(".base_rate").each(function(){         total_base_rate1 += parseFloat($(this).val());     });     $(".amount").each(function(){         total_amount += parseFloat($(this).html());     });        //$('#total_amount').text(total_amount.toFixed(2));     $('#gross_amount').text(total_amount.toFixed(2));    $('#total_base_rate').text(total_base_rate1.toFixed(2));    $('#total_base_rate1').text(total_base_rate1.toFixed(2));    //Discount amount calculate    var discount = $('#txtDiscount').val();     if(discount != ''){         if(total_amount == 0){            $('#total_discount_amount').text('0.00');        }        else{             var resultdiscount = total_amount - discount;             $('#total_discount_amount').text(resultdiscount.toFixed(2));             total_amount = resultdiscount;         }    }    else{         $('#total_discount_amount').text('0.00');    }        // Vat calculate    var tax_value = $('select#tax option:selected').attr('data-taxvalue');      if(!(tax_value > 0)){         $('#total_vat_amount').text('0.00');    }    else{        var tax_amount = 0;        var gross_total = 0;        var tax_type = $('select#tax option:selected').attr('data-taxtype');         tax_value = parseFloat(tax_value);        if(tax_type === null) {                 $('#total_vat_amount').text('0.00');                return false;             }        else{            gross_total = $('#gross_amount').text();            gross_total = isNaN(parseFloat(gross_total)) ? 0 : parseFloat(gross_total);             if (tax_type === 'percentage') {                tax_amount = (gross_total / 100) * tax_value;                $('#total_vat_amount').text(tax_amount.toFixed(2));                total_amount = total_amount + tax_amount;            }            else{                $('#total_vat_amount').text('0.00');            }         }    }        //$('#total_vat_amount').text('0.00');        $('#total_amount').text(total_amount.toFixed(2)); }function updateDiscount(){         var total_amount = 0;     		var Amount = document.getElementById('gross_amount').innerHTML;        Amount = isNaN(parseFloat(Amount)) ? 0 : parseFloat(Amount);		        var discount = $('#txtDiscount').val();         if(discount != ''){             if(Amount == 0){                $('#total_discount_amount').text('0.00');            }            else{                 var resultdiscount = Amount - discount;                 $('#total_discount_amount').text(resultdiscount.toFixed(2));                 total_amount = resultdiscount;            }        }				// Vat calculate		var tax_value = $('select#tax option:selected').attr('data-taxvalue');   		if(!(tax_value > 0)){ 			$('#total_vat_amount').text('0.00');		}		else{			var tax_amount = 0;			var gross_total = 0;			var tax_type = $('select#tax option:selected').attr('data-taxtype'); 			tax_value = parseFloat(tax_value);			if(tax_type === null) { 					$('#total_vat_amount').text('0.00');					return false; 				}			else{				gross_total = $('#gross_amount').text();				gross_total = isNaN(parseFloat(gross_total)) ? 0 : parseFloat(gross_total); 				if (tax_type === 'percentage') {					tax_amount = (gross_total / 100) * tax_value;					$('#total_vat_amount').text(tax_amount.toFixed(2));					total_amount = total_amount + tax_amount;				}				else{					$('#total_vat_amount').text('0.00');				} 			}		}        $('#total_amount').text(total_amount.toFixed(2)); 		} function divPrint(){ 	Popup();	return false;}function Popup() {	var data = $('#divInvoice').html();    var mywindow = window.open('', 'my div', 'height=400,width=600');    mywindow.document.write('<html><head><title></title>');      mywindow.document.write('<link href="<?php echo base_url("/assets/bower_components/bootstrap/dist/css/bootstrap.min.css"); ?>"');     mywindow.document.write('<link href="<?php echo base_url("assets/bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css"); ?>"');     mywindow.document.write('<link href="<?php echo base_url("/assets/dist/css/sb-admin-2.css"); ?>" rel="stylesheet">');     mywindow.document.write('<link href="<?php echo base_url("/assets/bower_components/font-awesome/css/font-awesome.min.css"); type="text/css">');     mywindow.document.write('</head><body>');    mywindow.document.write(data);    mywindow.document.write('</body></html>');    mywindow.document.close();    mywindow.print();                        }	//$('.base_rate').keypress(function(event) {	//	if (event.which != 46 && (event.which < 47 || event.which > 59))	//	{	//		event.preventDefault();	//		if ((event.which == 46) && ($(this).indexOf('.') != -1)) {	//			event.preventDefault();	//		}	//	}	//});	//	//$('.clsDiscount').keypress(function(event) {	//	if (event.which != 46 && (event.which < 47 || event.which > 59))	//	{	//		event.preventDefault();	//		if ((event.which == 46) && ($(this).indexOf('.') != -1)) {	//			event.preventDefault();	//		}	//	}	//});