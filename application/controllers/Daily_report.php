<?phpdefined('BASEPATH') OR die('No access');class Daily_Report extends MY_Controller {    public function __construct() {        parent::__construct();        $this->load->helper(array('form'));        $this->load->library(array('form_validation'));        $this->load->model('daily_report_model');   }    public function index() {        $this->data['rows'] = $this->daily_report_model->get_daily_reports();        $this->data['subview'] = $this->load->view('daily_report/view', $this->data, TRUE);        $this->load->view('layout/header');        $this->load->view('layout/_main', $this->data);        $this->load->view('layout/footer');    }    public function add() {        $this->load->model('client_model');        $this->data['action'] = 'daily_report/add';        /*         * Validation rules         */        $rules_add_invoice = array(            array(                'field' => 'client',                'label' => 'Client',                'rules' => 'required'            )        );        $this->form_validation->set_rules($rules_add_invoice);        if ($this->form_validation->run() === FALSE) {            $this->data['message'] = (validation_errors() == '') ? $this->session->flashdata('message') : alert_message(validation_errors(), 'error');        } else {            $this->daily_report_model->create();            $this->session->set_flashdata('message', alert_message('Daily report added successfully', 'success'));            redirect('daily_report/add', 'refresh');        }        /*         * Form inputs         */        // Fetch clients        $clients = $this->client_model->find_all();        $this->data['dropdown_client']['options'] = array();        $this->data['dropdown_client']['options'][''] = 'Select Client';        foreach ($clients as $client) {            $this->data['dropdown_client']['options'][$client->id] = $client->name;        }        $this->data['dropdown_client']['default'] = set_value('client');        $this->data['textarea_address'] = array('name' => 'address', 'value' => set_value('address'), 'rows' => 3);        $this->data['textarea_discussion'] = array('name' => 'discussion', 'value' => set_value('discussion'), 'rows' => 5);        $this->data['input_status'] = array('name' => 'status', 'value' => set_value('status'));        $this->data['subview'] = $this->load->view('daily_report/add', $this->data, TRUE);        $this->load->view('layout/header');        $this->load->view('layout/_main', $this->data);        $this->load->view('layout/footer');    }        public function edit($id) {        $daily_report = $this->daily_report_model->find_by_id($id);        $this->load->model('client_model');        $this->data['action'] = 'daily_report/edit/' . $id;        /*         * Validation rules         */        $rules_add_invoice = array(            array(                'field' => 'client',                'label' => 'Client',                'rules' => 'required'            )        );        $this->form_validation->set_rules($rules_add_invoice);        if ($this->form_validation->run() === FALSE) {            $this->data['message'] = (validation_errors() == '') ? $this->session->flashdata('message') : alert_message(validation_errors(), 'error');        } else {            $this->daily_report_model->update($id);            $this->session->set_flashdata('message', alert_message('Daily report updated successfully', 'success'));            redirect('daily_report/edit/' . $id, 'refresh');        }        /*         * Form inputs         */        // Fetch clients        $clients = $this->client_model->find_all();        $this->data['dropdown_client']['options'] = array();        $this->data['dropdown_client']['options'][''] = 'Select Client';        foreach ($clients as $client) {            $this->data['dropdown_client']['options'][$client->id] = $client->name;        }        $this->data['dropdown_client']['default'] = $daily_report->client_id;        $this->data['textarea_address'] = array('name' => 'address', 'value' => $daily_report->address, 'rows' => 3);        $this->data['textarea_discussion'] = array('name' => 'discussion', 'value' => $daily_report->discussion, 'rows' => 5);        $this->data['input_status'] = array('name' => 'status', 'value' => $daily_report->status);        $this->data['subview'] = $this->load->view('daily_report/add', $this->data, TRUE);        $this->load->view('layout/header');        $this->load->view('layout/_main', $this->data);        $this->load->view('layout/footer');    }}